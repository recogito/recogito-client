---
import Footer from '../../branding/Footer';
import HeaderLayout from '../HeaderLayout.astro';
import config from '../../config.json';

export interface Props {
  title: string;
}

const { title } = Astro.props;

const backgroundColor = config.branding.background_color;
const message = config.branding.footer_message;
const splashURL = config.branding.home_banner;
const textColor = config.branding.contrast_color;
const useFooter = config.branding.bottom_logos_enabled;
---

<HeaderLayout footer={false} title={title}>
  <div class='container'>
    <div class='slot-container'>
      <div style={{ flexGrow: '1' }}>
        <slot />
      </div>
      <footer>
        <div class='blurb'>
          {message || ''}
        </div>
        <div class='bottom_links'>
          {useFooter && <Footer contrastColor={textColor} />}
        </div>
      </footer>
    </div>
    <div class='img-container'>
      <img class='banner-img' src={splashURL} />
    </div>
  </div>
</HeaderLayout>

<style define:vars={{ backgroundColor, textColor }}>
  body {
    overflow: hidden;
  }

  .blurb {
    color: var(--textColor);
    font-size: 14px;
  }

  .banner-img {
    object-fit: cover;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }

  .container {
    display: flex;
    height: calc(100vh - 60px);
  }

  .img-container {
    flex-basis: 60%;
    height: 100%;
  }

  .slot-container {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    min-height: calc(100vh - 100px);
  }

  footer {
    align-items: center;
    background-color: var(--backgroundColor);
    display: flex;
    height: 80px;
    justify-content: space-between;
    padding: 0 40px;
    z-index: 1000;
  }
</style>